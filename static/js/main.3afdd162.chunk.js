(this["webpackJsonpmusic-choco"]=this["webpackJsonpmusic-choco"]||[]).push([[0],{110:function(n,e,t){"use strict";t.r(e);var r,a,c,o,i,u,l,d,s,b,g,m,h,p,O,f,j,v,y,x,w,k,S,I,E,T,D,_,N,C,Q,U,R,A,L=t(0),q=t.n(L),G=t(30),M=t.n(G),P=t(6),z=t(24),V=(t(69),t(29)),K=t(3),B={queue:[],randomQueue:[],queueData:[],loading:!1,openQueue:!1},Y={songData:{songId:"",title:"",duration:0,albumname:"",albumId:"",artist:""}},H={playing:!1,loop:"true"===localStorage.getItem("playerLoop"),random:"true"===localStorage.getItem("playerRandom"),volume:localStorage.getItem("playerVolume")&&"null"!==localStorage.getItem("playerVolume")?parseFloat(localStorage.getItem("playerVolume")):1},J={token:localStorage.getItem("TOKEN"),user:localStorage.getItem("UID")},F=Object(z.c)({queueReducer:function(){var n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:B,e=arguments.length>1?arguments[1]:void 0;switch(e.type){case"SET_QUEUE":return Object(K.a)(Object(K.a)({},n),{},{queue:Object(V.a)(e.queue),randomQueue:Object(V.a)(e.queue).sort((function(){return Math.random()-.5}))});case"ADD_QUEUE":return n.queue.includes(e.songId)?n:Object(K.a)(Object(K.a)({},n),{},{queue:[].concat(Object(V.a)(n.queue),[e.songId]),randomQueue:[].concat(Object(V.a)(n.queue),[e.songId]).sort((function(){return Math.random()-.5}))});case"SET_LOADING":return Object(K.a)(Object(K.a)({},n),{},{loading:e.loading});case"SET_QUEUE_DATA":return Object(K.a)(Object(K.a)({},n),{},{queueData:e.queueData});case"TOGGLE_QUEUE":return Object(K.a)(Object(K.a)({},n),{},{openQueue:!n.openQueue});default:return n}},songDataReducer:function(){var n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Y,e=arguments.length>1?arguments[1]:void 0;switch(e.type){case"SET_SONG_DATA":return Object(K.a)(Object(K.a)({},n),{},{songData:e.songData});case"SET_PLAYING_SONG":return Object(K.a)(Object(K.a)({},n),{},{songData:Object(K.a)(Object(K.a)({},n.songData),{},{songId:e.songId})});default:return n}},playerReducer:function(){var n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:H,e=arguments.length>1?arguments[1]:void 0;switch(e.type){case"SET_PLAYING":return Object(K.a)(Object(K.a)({},n),{},{playing:e.playing});case"SET_VOLUME":return localStorage.setItem("playerVolume",e.volume),Object(K.a)(Object(K.a)({},n),{},{volume:e.volume});case"TOGGLE_LOOP":return localStorage.setItem("playerLoop",!n.loop),Object(K.a)(Object(K.a)({},n),{},{loop:!n.loop});case"TOGGLE_RANDOM":return localStorage.setItem("playerRandom",!n.random),Object(K.a)(Object(K.a)({},n),{},{random:!n.random});default:return n}},authReducer:function(){var n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:J,e=arguments.length>1?arguments[1]:void 0;switch(e.type){case"SET_TOKEN":return localStorage.setItem("TOKEN",e.token),localStorage.setItem("UID",e.user),Object(K.a)(Object(K.a)({},n),{},{token:e.token,user:e.user});case"RESET_TOKEN":return localStorage.setItem("TOKEN",""),localStorage.setItem("UID",""),Object(K.a)(Object(K.a)({},n),{},{token:"",user:""});default:return n}}}),X=t(13),W=t(19),Z=t.n(W),$=t(4),nn=t(5),en=t(10),tn=t.n(en),rn=t(11),an=t(32),cn=t(8),on=t(14),un=t.n(on),ln=t(23),dn=t(1),sn=function(n){var e=n.playingSong,t=n.album,u=n.artist,l=n.albumImg,d=n.errorImg,s=n.songs,b=n.setAlbumToQueue,g=n.setSong,m=n.addQueue,h=Object(nn.a)(r||(r=Object($.a)(["\n        & > a {\n            display: flex;\n            align-items: center;\n            width: min-content;\n            text-decoration: none;\n            font-size: 1.2em;\n            margin: 1em 0;\n            font-weight: bold;\n            color: var(--contrast-color);\n            & > svg {\n                padding: 0 1rem;\n                width: 1em;\n                height: 100%;\n            }\n        }\n        & > a:hover {\n            text-decoration: underline;\n        }\n    "]))),p=Object(nn.a)(a||(a=Object($.a)(["\n        margin: 1rem 0 2rem 0;\n        display: grid;\n        grid-template-columns: 13rem 1fr;\n        img {\n            width: 12rem;\n            cursor: pointer;\n            opacity: 1;\n            background-color: white;\n        }\n\n        img:hover {\n            opacity: 0.7;\n        }\n\n        .album {\n            display: inline-block;\n            align-self: flex-end;\n        }\n    "]))),O=Object(nn.a)(c||(c=Object($.a)(["\n        list-style-type: none;\n        padding: 0;\n        margin-right: 1rem;\n\n        & > li {\n            padding: 0.8em 0;\n            padding-left: 1rem;\n            display: grid;\n            grid-template-columns: 4rem minmax(0, 1fr) 4rem 5rem;\n        }\n        & > hr {\n            margin: 0;\n            border: 1px solid var(--secondary-color);\n        }\n\n        & .activeItem {\n            background-color: var(--thirtiary-color);\n            color: var(--primary-color);\n        }\n    "]))),f=Object(nn.a)(o||(o=Object($.a)(["\n        font-size: 0.8em;\n    "]))),j=Object(nn.a)(i||(i=Object($.a)(["\n        background-color: var(--primary-color);\n\n        & .title {\n            overflow: hidden;\n            text-overflow: ellipsis;\n            white-space: nowrap;\n            width: 100%;\n        }\n\n        &:hover {\n            background-color: var(--secondary-color);\n        }\n\n        div {\n            display: flex;\n            align-items: center;\n        }\n\n        .icon {\n            fill: transparent;\n            margin: auto;\n            width: 2em;\n        }\n    "])));return Object(dn.c)("div",{css:h,children:[Object(dn.c)(an.b,{to:"/",children:[Object(dn.b)(tn.a,{path:rn.c})," Back"]}),Object(dn.c)("div",{css:p,children:[Object(dn.b)("img",{alt:t,src:l,onClick:function(){return b()},onError:function(n){return n.target.src=d}}),Object(dn.c)("div",{className:"album",children:[Object(dn.b)("h1",{children:t}),Object(dn.b)("h2",{children:u})]})]}),Object(dn.c)("ul",{css:O,children:[Object(dn.c)("li",{css:f,children:[Object(dn.b)("div",{children:"#"}),Object(dn.b)("div",{className:"title",children:"Title"}),Object(dn.b)("div",{}),Object(dn.b)("div",{children:"Duration"})]}),Object(dn.b)("hr",{}),function(n){var t=n.songs,r=n.setSong,a=n.addQueue;return t.map((function(n,t){return Object(dn.c)("li",{css:j,className:"".concat(e===n._id?"activeItem":""),onClick:function(){return r(n._id)},onContextMenu:function(){return a(n._id)},children:[Object(dn.b)("div",{children:t+1}),Object(dn.b)("div",{className:"title",children:n.title}),Object(dn.b)("div",{className:"icon",onClick:function(){return a(n._id)},children:Object(dn.b)("svg",{fill:"currentColor",viewBox:"0 0 20 20",xmlns:"http://www.w3.org/2000/svg",children:Object(dn.b)("path",{d:"M5 3a2 2 0 00-2 2v2a2 2 0 002 2h2a2 2 0 002-2V5a2 2 0 00-2-2H5zM5 11a2 2 0 00-2 2v2a2 2 0 002 2h2a2 2 0 002-2v-2a2 2 0 00-2-2H5zM11 5a2 2 0 012-2h2a2 2 0 012 2v2a2 2 0 01-2 2h-2a2 2 0 01-2-2V5zM14 11a1 1 0 011 1v1h1a1 1 0 110 2h-1v1a1 1 0 11-2 0v-1h-1a1 1 0 110-2h1v-1a1 1 0 011-1z"})})}),Object(dn.c)("div",{children:[(n.duration/60<10?"0":"")+Math.floor(n.duration/60)," ",": ",(n.duration%60<10?"0":"")+n.duration%60]})]},n._id)}))}({songs:s,setSong:g,addQueue:m})]})]})},bn=function(n){return{type:"SET_SONG_DATA",songData:n}},gn=function(n){return{type:"SET_PLAYING_SONG",songId:n}},mn=function(n){Object(V.a)(n);return{type:"SET_QUEUE",queue:n}},hn=function(n){return{type:"ADD_QUEUE",songId:n}},pn=function(n){return{type:"SET_LOADING",loading:n}},On=function(n){return{type:"SET_PLAYING",playing:n}},fn=t(7),jn=function(){var n="http://118.100.207.12:4000/api",e=Object(L.useState)([]),t=Object(X.a)(e,2),r=t[0],a=t[1],c=Object(L.useState)(""),o=Object(X.a)(c,2),i=o[0],u=o[1],l=Object(L.useState)(""),d=Object(X.a)(l,2),s=d[0],b=d[1],g=[],m=Object(cn.g)().id,h=Object(P.d)((function(n){return n.songDataReducer.songData.songId})),p=Object(P.d)((function(n){return n.queueReducer.queue})),O=Object(P.c)();Object(L.useEffect)((function(){Z.a.get("".concat(n,"/album/").concat(m)).then((function(n){u(n.data.albumname),b(n.data.artist)})),Z.a.get("".concat(n,"/album/").concat(m)).then((function(n){return a(n.data.songs)})).catch((function(n){return console.log(n)}))}),[m,n]);var f=function(){var n=Object(ln.a)(un.a.mark((function n(e){return un.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:O(hn(e)),O(gn(e)),O(On(!0));case 3:case"end":return n.stop()}}),n)})));return function(e){return n.apply(this,arguments)}}(),j=function(){var n=Object(ln.a)(un.a.mark((function n(){return un.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:O(mn(g)),O(gn(g[0])),O(On(!0));case 3:case"end":return n.stop()}}),n)})));return function(){return n.apply(this,arguments)}}();return Object(fn.jsx)(sn,{playingSong:h,album:i,artist:s,albumImg:"".concat(n,"/album/ico/").concat(m),errorImg:"https://f4.bcbits.com/img/a4139357031_10.jpg",songs:r,setAlbumToQueue:j,setSong:f,addQueue:function(n){0===p.length&&O(gn(n)),O(hn(n))}})},vn=t(58),yn=t.n(vn),xn=function(n){var e=Object(nn.a)(u||(u=Object($.a)(["\n        font-size: 0.8em;\n        width: 98%;\n        padding: 10px 1%;\n        background-color: #303030;\n        color: #d0d0d0;\n        overflow: hidden;\n        position: absolute;\n        bottom: 0;\n\n        &:focus {\n            outline: none;\n        }\n    "]))),t=Object(nn.a)(l||(l=Object($.a)(["\n        display: grid;\n        grid-template-columns: minmax(2rem, 1fr) minmax(4rem, 2fr) minmax(\n                2rem,\n                0.8fr\n            );\n        grid-template-rows: 1fr 1fr;\n    "])));return Object(dn.c)("div",{css:e,children:[Object(dn.b)(yn.a,{width:"0",height:"0",loop:!1,url:n.songUrl,playing:n.playing,volume:n.volume,onStart:function(){return n.setCurrentTime(0)},onProgress:function(e){return n.onProgress(e.playedSeconds)},onEnded:n.onEnded}),Object(dn.c)("div",{css:t,children:[kn({songData:n.songData,albumUrl:n.albumUrl}),Sn({playing:n.playing,nextSong:n.nextSong,prevSong:n.prevSong,playPause:n.playPause}),In({volume:n.volume,lastVolume:n.lastVolume,changeVolume:n.changeVolume,toggleQueue:n.toggleQueue}),En({currentTime:n.currentTime,duration:n.songData.duration,setClickedTime:n.setClickedTime})]})]})},wn=function(n){var e=n.onChange,t=n.transform,r=Object(nn.a)(d||(d=Object($.a)(["\n        width: 96%;\n        margin: auto 2%;\n        background-color: grey;\n        height: 0.3em;\n        border-radius: 2px;\n        overflow: hidden;\n    "]))),a=Object(nn.a)(s||(s=Object($.a)(["\n        width: 100%;\n        height: 100%;\n        background-color: green;\n    "]))),c=Object(nn.a)(b||(b=Object($.a)(["\n        cursor: pointer;\n        width: 100%;\n        height: 100%;\n        opacity: 0;\n        margin: auto 0;\n        float: right;\n        transform: translateY(-100%);\n    "])));return Object(dn.c)("div",{css:r,children:[Object(dn.b)("div",{css:a,style:{transform:"translateX(".concat(t,"%)")}}),Object(dn.b)("input",{css:c,type:"range",onChange:function(n){return e(n.target.value)}})]})},kn=function(n){var e=n.songData,t=n.albumUrl,r=Object(nn.a)(g||(g=Object($.a)(["\n        margin: auto 0;\n        grid-row: 1/3;\n        text-align: left;\n        display: grid;\n        grid-template-columns: 64px 1fr;\n        grid-template-rows: 1fr 1fr;\n        @media (max-width: 768px) {\n            display: flex;\n            flex-direction: column;\n        }\n    "]))),a=Object(nn.a)(m||(m=Object($.a)(["\n        grid-row: 1/3;\n        width: 64px;\n        height: 64px;\n\n        & > img {\n            max-width: 64px;\n            max-height: 64px;\n            background-color: white;\n        }\n\n        @media (max-width: 768px) {\n            display: none;\n        }\n    "]))),c=Object(nn.a)(h||(h=Object($.a)(["\n        font-size: 1.2em;\n        margin: 0 10px;\n        display: flex;\n        align-items: flex-end;\n        white-space: nowrap;\n        overflow: hidden !important;\n        text-overflow: ellipsis;\n    "]))),o=Object(nn.a)(p||(p=Object($.a)(["\n        font-size: 1em;\n        margin: 0 10px;\n        display: flex;\n        align-items: flex-start;\n        white-space: nowrap;\n        overflow: hidden !important;\n        text-overflow: ellipsis;\n    "])));return Object(dn.c)("div",{css:r,children:[Object(dn.b)("div",{css:a,children:Object(dn.b)("img",{src:t})}),Object(dn.b)("div",{css:c,children:e&&e.songId?e.title:"---"}),Object(dn.b)("div",{css:o,children:e&&e.songId?e.artist:"---"})]})},Sn=function(n){var e=n.playing,t=n.playPause,r=n.nextSong,a=n.prevSong,c=Object(nn.a)(O||(O=Object($.a)(["\n        text-align: center;\n\n        & > svg {\n            height: 100%;\n            margin: auto;\n            width: 1.8em;\n            margin: 0px 12px;\n            cursor: pointer;\n\n            &:hover {\n                opacity: 0.7;\n            }\n        }\n\n        & > .play {\n            width: 2.5em;\n        }\n    "])));return Object(dn.c)("div",{css:c,children:[Object(dn.b)(tn.a,{path:rn.k,onClick:a}),e?Object(dn.b)(tn.a,{path:rn.f,className:"play",onClick:function(){return t(!1)}}):Object(dn.b)(tn.a,{path:rn.h,className:"play",onClick:function(){return t(!0)}}),Object(dn.b)(tn.a,{path:rn.j,onClick:r})]})},In=function(n){var e=n.volume,t=n.lastVolume,r=n.changeVolume,a=n.toggleQueue,c=Object(nn.a)(f||(f=Object($.a)(["\n        display: flex;\n        justify-content: flex-end;\n        grid-row: 1/3;\n        grid-column: 3;\n\n        & svg {\n            padding: 4px;\n            width: 1.8em;\n            cursor: pointer;\n            margin: 0 10px;\n\n            &:hover {\n                opacity: 0.7;\n            }\n        }\n\n        & > div {\n            display: flex;\n            & > div {\n                @media (max-width: 768px) {\n                    display: none;\n                }\n            }\n        }\n    "])));return Object(dn.c)("div",{css:c,children:[Object(dn.b)("div",{children:Object(dn.b)(tn.a,{path:rn.b,onClick:a})}),Object(dn.c)("div",{children:[0===e?Object(dn.b)(tn.a,{path:rn.n,onClick:function(){return r(t)}}):Object(dn.b)(tn.a,{path:rn.m,onClick:function(){return r(0)}}),Object(dn.b)(wn,{onChange:function(n){r(n/100)},transform:100*e-100})]})]})},En=function(n){var e=n.currentTime,t=n.duration,r=n.setClickedTime,a=Object(nn.a)(j||(j=Object($.a)(["\n        margin: auto 0;\n        text-align: center;\n        display: grid;\n        grid-template-columns: 4rem 10fr 4rem;\n        font-size: 0.9em;\n    "]))),c=function(n){return"".concat(n/60<10?"0":""," \n                    ").concat(Math.floor(n/60),"\n                : ").concat(n%60<10?"0":""," ").concat(n%60)};return Object(dn.c)("div",{css:a,children:[Object(dn.b)("div",{children:c(e)}),Object(dn.b)(wn,{onChange:r,transform:e/t*100-100}),Object(dn.b)("div",{children:c(t)})]})},Tn=function(){var n="http://118.100.207.12:4000/api",e=Object(P.d)((function(n){return n.songDataReducer.songData})),t=Object(P.d)((function(n){return n.queueReducer})),r=t.queue,a=t.randomQueue,c=Object(P.d)((function(n){return n.playerReducer})),o=c.playing,i=c.volume,u=c.loop,l=c.random,d=Object(L.useState)(0),s=Object(X.a)(d,2),b=s[0],g=s[1],m=Object(L.useState)(i),h=Object(X.a)(m,2),p=h[0],O=h[1],f=Object(P.c)(),j=Object(L.createRef)(),v=function(n){var t=n/100*e.duration;j.current.seekTo(t,"second")},y=function(){if(e.songId){var n;(n=l?a:r).indexOf(e.songId)===n.length-1?(f(gn(u?n[0]:"")),u||f(On(!1))):f(gn(n[n.indexOf(e.songId)+1]))}};return Object(fn.jsx)(xn,{songUrl:e.songId?"".concat(n,"/song/play/").concat(e.songId):"",albumUrl:e&&e.songId?"".concat(n,"/album/ico/").concat(e.albumId):"",playing:o,volume:i,lastVolume:p,songData:e,currentTime:b,setCurrentTime:g,onProgress:function(n){Math.floor(n)<=e.duration&&g(Math.ceil(n))},onEnded:function(){f(On(!1)),g(0),y(),f(On(!0))},nextSong:y,prevSong:function(){l?0===a.indexOf(e.songId)?v(0):f(gn(a[a.indexOf(e.songId)-1])):0===r.indexOf(e.songId)?v(0):f(gn(r[r.indexOf(e.songId)-1]))},changeVolume:function(n){O(0===i?p:i),f(function(n){var e=n;return n>1&&(e=1,console.error("Invalid volume",e)),{type:"SET_VOLUME",volume:e}}(n))},setClickedTime:v,playPause:function(n){e.songId?f(On(n)):f(On(!1))},toggleQueue:function(){f((console.log("toggle"),{type:"TOGGLE_QUEUE"}))}})},Dn=t(59),_n=t.n(Dn),Nn=t(34),Cn=function(n){var e=n.isLoop,t=n.isRandom,r=n.loading,a=n.toggleRandom,c=n.toggleLoop,o=n.handleDragDrop,i=n.queueList,u=n.openQueue,l=Object(nn.a)(v||(v=Object($.a)(["\n        background-color: var(--secondary-color);\n        padding: 0 1rem;\n        overflow-y: scroll;\n        display: ",";\n\n        & > .loading {\n            margin: auto;\n        }\n\n        @media (max-width: 1024px) {\n            width: calc(100% - 3rem);\n            height: 100%;\n            margin-right: 1rem;\n            background-color: var(--secondary-color);\n        }\n    "])),u?"block":"none"),d=Object(nn.a)(y||(y=Object($.a)(["\n        display: flex;\n        align-items: baseline;\n        align-content: flex-end;\n        margin-left: auto;\n\n        & > div {\n            display: flex;\n            margin-left: auto;\n\n            & > svg {\n                fill: var(--contrast-color);\n                width: 2em;\n                height: 2em;\n                margin: 1rem;\n                cursor: pointer;\n\n                &:hover {\n                    opacity: 0.7;\n                }\n            }\n\n            & > .active {\n                color: var(--primary-color);\n            }\n        }\n    "]))),s=Object(nn.a)(x||(x=Object($.a)(["\n        list-style-type: none;\n        padding-left: 0;\n\n        & .active {\n            background-color: black;\n            color: var(--contrast-color);\n        }\n\n        & .dragging {\n            background-color: var(--thirtiary-color);\n            color: var(--primary-color);\n        }\n    "])));return Object(dn.c)("div",{css:l,children:[Object(dn.c)("div",{css:d,children:[Object(dn.b)("h1",{children:"Queue"}),Object(dn.c)("div",{children:[Object(dn.b)(tn.a,{path:rn.i,className:t?"active":"",onClick:function(){return a()}}),Object(dn.b)(tn.a,{path:rn.l,className:e?"active":"",onClick:function(){return c()}})]})]}),r?Object(dn.b)(_n.a,{className:"loading",type:"bars"}):Object(dn.b)(Nn.a,{onDragEnd:o,children:Object(dn.b)(Nn.c,{droppableId:"droppable",children:function(n){return Object(dn.c)("ul",Object(K.a)(Object(K.a)({css:s},n.droppableProps),{},{ref:n.innerRef,children:[i,n.placeholder]}))}})})]})},Qn=Object(nn.a)(w||(w=Object($.a)(["\n    padding: 3% 4%;\n    display: grid;\n    grid-template-columns: 1fr 3em 25px;\n    grid-template-rows: 1fr 1fr;\n\n    &:hover {\n        background-color: var(--primary-color);\n    }\n\n    & > .title {\n        width: 90%;\n        white-space: nowrap;\n        overflow: hidden !important;\n    }\n\n    & > .album {\n        font-size: 0.8em;\n        grid-row: 2;\n        width: 90%;\n        white-space: nowrap;\n        overflow: hidden !important;\n    }\n\n    & > .duration {\n        display: flex;\n        align-self: center;\n        grid-row: 1/3;\n        grid-column: 2;\n    }\n\n    & .removeButton {\n        width: 25px;\n        height: 25px;\n        grid-row: 1/3;\n        grid-column: 3;\n        cursor: pointer;\n        display: flex;\n        align-self: center;\n    }\n"]))),Un=function(n){var e=n.data,t=n.playingSong,r=n.skipQueue,a=n.removeQueue;return e.map((function(n,e){return Object(dn.b)(Nn.b,{draggableId:n.songId,index:e,children:function(e,c){return Object(dn.b)("div",Object(K.a)(Object(K.a)(Object(K.a)({id:n.songId,className:"".concat(t===n.songId?"active":c.isDragging?"dragging":""),ref:e.innerRef},e.draggableProps),e.dragHandleProps),{},{datakey:n.songId,onClick:function(n){return r(n)},onContextMenu:function(n){a(n)},children:Object(dn.c)("li",{css:Qn,children:[Object(dn.b)("div",{className:"title",children:n.title}),Object(dn.b)("div",{className:"album",children:n.albumname}),Object(dn.b)(tn.a,{path:rn.d,datakey:n.songId,className:"removeButton",onClick:function(n){return a(n)}}),Object(dn.c)("div",{className:"duration",children:[" ",(n.duration/60<10?"0":"")+Math.floor(n.duration/60)," ",":"," ",(n.duration%60<10?"0":"")+Math.floor(n.duration%60)]})]})}))}},n.songId)}))},Rn=function(n){var e=n.openQueue,t=Object(P.d)((function(n){return n.queueReducer})),r=t.queue,a=t.queueData,c=t.loading,o=t.loop,i=t.random,u=Object(P.d)((function(n){return n.songDataReducer.songData.songId})),l=Object(P.c)();Object(L.useEffect)((function(){(function(){var n=Object(ln.a)(un.a.mark((function n(e){var t,a,c,o;return un.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:t=[],l(pn(!0)),a=0;case 3:if(!(a<r.length)){n.next=20;break}c=!1,o=0;case 6:if(!(o<e.length)){n.next=14;break}if(r[a]!==e[o].songId){n.next=11;break}return t.push(e[o]),c=!0,n.abrupt("break",14);case 11:o++,n.next=6;break;case 14:if(c){n.next=17;break}return n.next=17,Z.a.get("".concat("http://118.100.207.12:4000/api","/song/").concat(r[a])).then((function(n){t.push({songId:n.data.songs._id,title:n.data.songs.title,duration:n.data.songs.duration,albumname:n.data.albumname,albumId:n.data._id,artist:n.data.artist})})).catch((function(n){return console.log(n)}));case 17:a++,n.next=3;break;case 20:return n.abrupt("return",t);case 21:case"end":return n.stop()}}),n)})));return function(e){return n.apply(this,arguments)}})()(a).then((function(n){l(function(n){return{type:"SET_QUEUE_DATA",queueData:n}}(n)),l(pn(!1)),n.length<=0||u&&l(bn(n[n.map((function(n){return n.songId})).indexOf(u)]))}))}),[r]),Object(L.useEffect)((function(){if(u){var n=a.map((function(n){return n.songId}));n.includes(u)&&l(bn(a[n.indexOf(u)]));var e=document.getElementById(u);e&&e.scrollIntoView(!1)}}),[u]);var d=function(){var n=Object(ln.a)(un.a.mark((function n(e){var t,a;return un.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:(t=e.currentTarget.getAttribute("datakey"))===u&&(l(gn("")),l(On(!1))),(a=r).splice(r.indexOf(t),1),l(mn(a));case 5:case"end":return n.stop()}}),n)})));return function(e){return n.apply(this,arguments)}}();return Object(fn.jsx)(Cn,{isLoop:o,isRandom:i,loading:c,toggleRandom:function(){l({type:"TOGGLE_RANDOM"})},toggleLoop:function(){l({type:"TOGGLE_LOOP"})},handleDragDrop:function(n){if(n.destination){var e=r,t=e.splice(n.source.index,1),a=Object(X.a)(t,1)[0];e.splice(n.destination.index,0,a),l(mn(e))}},queueList:Un({data:a.length>0?a:[],playingSong:u,skipQueue:function(n){var e=n.currentTarget.getAttribute("datakey");r.includes(e)&&(l(gn(e)),l(On(!0)))},removeQueue:d}),openQueue:e})},An=function(n){var e,t,r=n.imageUrl,a=n.playingSong,c=n.albumSearch,o=n.songSearch,i=n.playSong,u=n.addSong,l=n.handleImageError,d=n.handlePlayAlbum,s=Object(nn.a)(k||(k=Object($.a)(["\n        display: flex;\n        overflow-x: scroll;\n\n        & > a {\n            color: white;\n            text-decoration: none;\n            &:hover {\n                text-decoration: underline;\n            }\n        }\n\n        & .cardItem {\n            margin-right: 1rem;\n            margin-bottom: 1rem;\n        }\n    "]))),b=Object(nn.a)(S||(S=Object($.a)(["\n        width: 200px;\n        height: 300px;\n        padding: 1rem;\n        margin-right: 2rem;\n        border-radius: 2%;\n        color: var(--text-color);\n        background-color: var(--secondary-color);\n        cursor: pointer;\n\n        & > img {\n            width: 200px;\n        }\n        & > div {\n            display: flex;\n            flex-direction: column;\n            & > h1 {\n                height: 3em;\n                overflow: hidden;\n                text-overflow: ellipsis;\n                font-size: 1.4em;\n                margin: 0;\n            }\n            & > div {\n                display: flex;\n                justify-content: space-between;\n                & > p {\n                    overflow: hidden;\n                    font-size: 1.2em;\n                    margin: 0;\n                }\n                & > svg {\n                    width: 2rem;\n                    &:hover {\n                        opacity: 0.7;\n                    }\n                }\n            }\n        }\n    "]))),g=Object(nn.a)(I||(I=Object($.a)(["\n        list-style-type: none;\n        padding: 0;\n        margin-right: 1rem;\n\n        & > li {\n            padding: 0.5rem 1rem;\n            height: 60px;\n            display: grid;\n            grid-template-columns: 70px 20fr 4em;\n            cursor: pointer;\n\n            &:hover {\n                background-color: var(--secondary-color);\n            }\n\n            & > div {\n                display: flex;\n                align-items: center;\n            }\n\n            & > .songDetail {\n                display: grid;\n                grid-template-rows: 1fr 1fr;\n            }\n\n            & > .songTitle {\n                font-size: 1.2em;\n                overflow: hidden;\n            }\n\n            & > .album {\n                width: 60px;\n            }\n        }\n        & .activeItem {\n            background-color: var(--thirtiary-color);\n            color: var(--primary-color);\n        }\n    "])));return Object(dn.c)("div",{children:[Object(dn.b)("h1",{children:"Albums"}),Object(dn.b)("div",{css:s,children:(t=c,t.map((function(n){return Object(dn.c)(an.b,{css:b,to:"/albums/".concat(n._id),children:[Object(dn.b)("img",{src:"".concat(r).concat(n._id),alt:"Album Icon",onError:l}),Object(dn.c)("div",{children:[Object(dn.b)("h1",{children:n.albumname}),Object(dn.c)("div",{children:[Object(dn.b)("p",{children:n.artist}),Object(dn.b)(tn.a,{path:rn.g,onClick:function(e){e.preventDefault(),d(n._id)}})]})]})]},n._id)})))}),Object(dn.b)("h1",{children:"Songs"}),Object(dn.b)("ul",{css:g,children:(e=o,e.map((function(n){return Object(dn.c)("li",{onClick:function(e){return i(n.songs._id)},onContextMenu:function(e){return u(n.songs._id)},className:a===n.songs._id?"activeItem":"",children:[Object(dn.b)("img",{src:"".concat(r).concat(n._id),alt:"album logo",className:"album",onError:l}),Object(dn.c)("div",{className:"songDetail",children:[Object(dn.b)("div",{className:"songTitle",children:n.songs.title}),Object(dn.b)("div",{children:n.artist})]}),Object(dn.c)("div",{children:[(n.songs.duration/60<10?"0":"")+Math.floor(n.songs.duration/60)," ",":"," ",(n.songs.duration%60<10?"0":"")+n.songs.duration%60]})]},n.songs._id)})))})]})},Ln=function(n){var e=n.search,t="http://118.100.207.12:4000/api",r="".concat(t,"/album/ico/"),a=Object(L.useState)([]),c=Object(X.a)(a,2),o=c[0],i=c[1],u=Object(L.useState)([]),l=Object(X.a)(u,2),d=l[0],s=l[1],b=Object(P.d)((function(n){return n.songDataReducer.songData.songId})),g=Object(P.c)();Object(L.useEffect)((function(){e&&""!==e&&(Z.a.get("".concat(t,"/album/search/").concat(e)).then((function(n){return i(n.data)})).catch((function(n){return i([])})),Z.a.get("".concat(t,"/song/search/").concat(e)).then((function(n){return s(n.data)})).catch((function(n){return s([])})))}),[e,t]);var m=function(){var n=Object(ln.a)(un.a.mark((function n(e){var r,a;return un.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return r=[],n.next=3,Z.a.get("".concat(t,"/album/").concat(e)).then((function(n){return r=n.data.songs})).catch((function(n){return r=[]}));case 3:a=[],r.forEach((function(n){a.push(n._id)})),g(gn(a[0])),g(On(!0)),g(mn(a));case 8:case"end":return n.stop()}}),n)})));return function(e){return n.apply(this,arguments)}}();return Object(fn.jsx)(An,{imageUrl:r,playingSong:b,albumSearch:o,songSearch:d,playSong:function(n){g(hn(n)),g(gn(n)),g(On(!0))},addSong:function(n){g(hn(n))},handleImageError:function(n){n.target.src="https://f4.bcbits.com/img/a4139357031_10.jpg"},handlePlayAlbum:m})},qn=function(){return Object(fn.jsx)("div",{children:"hi"})},Gn=function(){return Object(fn.jsx)(qn,{})},Mn=function(n,e){return{type:"SET_TOKEN",token:n,user:e}},Pn=function(n){var e=n.setUsername,t=n.setPassword,r=n.login,a=n.signup,c=n.err,o=Object(nn.a)(E||(E=Object($.a)(["\n        width: 100%;\n        height: 100%;\n        display: flex;\n        flex-direction: column;\n        align-items: flex-start;\n        justify-content: flex-start;\n        color: var(--primary-color);\n    "]))),i=Object(nn.a)(T||(T=Object($.a)(["\n        margin: auto;\n        background-color: white;\n        padding: 2rem;\n\n        & > h1 {\n            margin: 0;\n            margin-bottom: 1rem;\n        }\n\n        & button {\n            margin: 0.5rem 0;\n            width: 100%;\n            height: 2rem;\n            color: grey;\n            border: 1px solid grey;\n            background-color: white;\n            cursor: pointer;\n\n            &:hover {\n                background-color: var(--thirtiary-color);\n                color: var(--primary-color);\n            }\n        }\n\n        & #signup {\n            background-color: var(--primary-color);\n            color: var(--contrast-color);\n            &:hover {\n                background-color: var(--secondary-color);\n            }\n        }\n    "]))),u=Object(nn.a)(D||(D=Object($.a)(["\n        width: 18rem;\n        padding: 1rem 0;\n        display: flex;\n        flex-direction: column;\n\n        & > input {\n            margin: 0 0;\n            height: 1.5em;\n        }\n    "])));return Object(dn.b)("div",{css:o,children:Object(dn.c)("div",{css:i,children:[Object(dn.b)("h1",{children:"Login"}),Object(dn.b)("span",{css:Object(nn.a)(_||(_=Object($.a)(["\n                        color: red;\n                    "]))),children:""===c?"":c}),Object(dn.c)("form",{children:[Object(dn.c)("div",{css:u,children:[Object(dn.b)("label",{children:"Username: "}),Object(dn.b)("input",{type:"text",onChange:function(n){return e(n.target.value)}})]}),Object(dn.c)("div",{css:u,children:[Object(dn.b)("label",{children:"Password: "}),Object(dn.b)("input",{type:"password",onChange:function(n){return t(n.target.value)}})]}),Object(dn.b)("button",{onClick:function(n){n.preventDefault(),r()},children:"Log In"}),Object(dn.b)("button",{id:"signup",onClick:function(n){n.preventDefault(),a()},children:"Sign Up"})]})]})})},zn=function(){var n="http://118.100.207.12:4000/api",e=Object(L.useState)(""),t=Object(X.a)(e,2),r=t[0],a=t[1],c=Object(L.useState)(""),o=Object(X.a)(c,2),i=o[0],u=o[1],l=Object(L.useState)(""),d=Object(X.a)(l,2),s=d[0],b=d[1],g=Object(P.c)(),m=function(){var e=Object(ln.a)(un.a.mark((function e(){return un.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return b(""),e.next=3,Z.a.post("".concat(n,"/auth/login"),{credentials:{username:r,password:i}}).then((function(n){g(Mn(n.data.authToken,n.data.userid)),""===n.data.authToken&&b("Invalid username or password.")})).catch((function(n){return b(n)}));case 3:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),h=function(){var e=Object(ln.a)(un.a.mark((function e(){return un.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return b(""),e.next=3,Z.a.post("".concat(n,"/auth/signup"),{credentials:{username:r,password:i}}).then((function(n){g(Mn(n.data.authToken,n.data.userid))})).catch((function(n){return b(n)}));case 3:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();return Object(fn.jsx)(Pn,{setUsername:a,setPassword:u,login:m,signup:h,err:s})},Vn=function(n){var e=n.username,t=n.token,r=n.search,a=n.openQueue,c=n.handleLogout,o=n.setSearch,i=Object(nn.a)(N||(N=Object($.a)(["\n        height: 90%;\n        width: calc(100% - 2rem);\n        padding-left: 2rem;\n        display: ",";\n        grid-template-columns: 1fr 25rem;\n        @media (max-width: 1024px) {\n            display: block;\n        }\n    "])),a?"grid":"block"),u=Object(nn.a)(C||(C=Object($.a)(["\n        overflow-y: scroll;\n        height: 100%;\n        padding-right: 1rem;\n        @media (max-width: 1024px) {\n            display: ",";\n        }\n    "])),a?"none":"block"),l=Object(nn.a)(Q||(Q=Object($.a)(["\n        display: flex;\n        height: 8vh;\n        align-items: center;\n        justify-content: space-between;\n    "]))),d=Object(nn.a)(U||(U=Object($.a)(["\n        display: flex;\n        align-items: center;\n        & > h1 {\n            min-width: max-content;\n        }\n    "]))),s=Object(nn.a)(R||(R=Object($.a)(['\n        height: 2rem;\n        padding: 0 0.5rem;\n        margin: 0 1rem;\n        display: flex;\n        align-self: center;\n        background-color: var(--contrast-color);\n        border-radius: 2rem;\n        min-width: 12rem;\n\n        & svg {\n            align-self: center;\n            margin: 0;\n            color: var(--primary-color);\n            width: 24px;\n            height: 24px;\n        }\n        & input[type="text"] {\n            width: 100%;\n            display: flex;\n            height: 1em;\n            font-size: 1em;\n            align-self: center;\n            border: none;\n            background-color: var(--contrast-color);\n            outline: none;\n        }\n    ']))),b=Object(nn.a)(A||(A=Object($.a)(["\n        display: flex;\n        height: 2rem;\n        min-width: 8rem;\n        align-items: center;\n        padding: 0 0.5rem;\n        margin-right: 1rem;\n        cursor: pointer;\n        &:hover {\n            background-color: var(--thirtiary-color);\n        }\n        & > svg {\n            margin: 0.5rem;\n        }\n    "])));return Object(dn.b)("div",{className:"App",onContextMenu:function(n){return n.preventDefault()},children:Object(dn.b)(an.a,{basename:"/music-choco",children:t&&""!==t?Object(dn.c)(dn.a,{children:[Object(dn.c)("div",{css:i,children:[Object(dn.c)("div",{css:u,children:[Object(dn.c)("div",{css:l,children:[Object(dn.c)("div",{css:d,children:[Object(dn.b)("h1",{children:"music-choco"}),Object(dn.c)("div",{css:s,children:[Object(dn.b)(tn.a,{path:rn.e}),Object(dn.b)("input",{type:"text",onChange:function(n){return o(n.target.value)}})]})]}),Object(dn.c)("div",{css:b,onClick:c,children:[Object(dn.b)(tn.a,{path:rn.a,size:1}),Object(dn.b)("span",{children:e})]})]}),Object(dn.c)(cn.d,{children:[Object(dn.b)(cn.b,{exact:!0,path:"/",children:""===r?Object(dn.b)(Gn,{}):Object(dn.b)(Ln,{search:r})}),Object(dn.b)(cn.b,{path:"/albums/:id",children:Object(dn.b)(jn,{})})]})]}),Object(dn.b)(Rn,{openQueue:a})]}),Object(dn.b)(Tn,{})]}):Object(dn.c)(cn.d,{children:[Object(dn.b)(cn.b,{exact:!0,path:"/login",component:zn}),Object(dn.b)(cn.b,{path:"/",children:Object(dn.b)(cn.a,{to:"/login"})})]})})})},Kn=function(){var n=Object(L.useState)(""),e=Object(X.a)(n,2),t=e[0],r=e[1],a=Object(L.useState)("username"),c=Object(X.a)(a,2),o=c[0],i=c[1],u=Object(P.d)((function(n){return n.authReducer.token})),l=Object(P.d)((function(n){return n.authReducer.user})),d=Object(P.d)((function(n){return n.queueReducer.openQueue})),s=Object(P.c)();Object(L.useEffect)((function(){u&&"null"!=u&&Z.a.get("".concat("http://118.100.207.12:4000/api","/auth"),{headers:{Authorization:u}}).then((function(n){return i(n.data.username)})).catch((function(n){401===n.response.status&&s({type:"RESET_TOKEN"})}))}),[l]);return Object(fn.jsx)(Vn,{token:u,search:t,username:o,openQueue:d,setSearch:r,handleLogout:function(){s({type:"RESET_TOKEN"}),window.location.reload()}})},Bn=Object(z.e)(F);M.a.render(Object(fn.jsx)(q.a.StrictMode,{children:Object(fn.jsx)(P.a,{store:Bn,children:Object(fn.jsx)(Kn,{})})}),document.getElementById("root"))},69:function(n,e,t){}},[[110,1,2]]]);
//# sourceMappingURL=main.3afdd162.chunk.js.map