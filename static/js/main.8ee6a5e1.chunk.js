(this["webpackJsonpmusic-choco"]=this["webpackJsonpmusic-choco"]||[]).push([[0],{119:function(e,t,a){"use strict";a.r(t);var n=a(9),c=a(1),r=a.n(c),s=a(23),i=a.n(s),l=a(5),o=a(27),d=a(19),u=(a(69),a(70),a(7)),j=a(13),b=a.p+"static/media/music-choco.fddb79b0.png",m=a(0),h=function(e){var t=e.children;return Object(m.jsxs)("div",{class:"dark:bg-backgroundDark min-h-screen",children:[Object(m.jsx)("div",{className:"py-4 navbar-shadow dark:bg-backgroundDark",children:Object(m.jsx)("img",{src:b,alt:"music-choco",className:"mx-auto max-w-lg h-12"})}),Object(m.jsx)("div",{className:"mx-auto mt-12 max-w-lg",children:t})]})},O=a(4),p=function(e){return{type:"SET_TOKEN",token:e}},x=function(e,t){return{type:"SET_USER",uid:e,displayName:t}},f=a(12),g=a.n(f),v=a(25),y=a(14),N=a.n(y),k=a(42),w=a.n(k),C="https://music-choco.herokuapp.com",T="1c8ddbafdd141416566e19e2c4bebb4d31f686cfb2df13b6b928bf70f3af68ab",A=function(){var e=Object(v.a)(g.a.mark((function e(t){var a,n,c;return g.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=t.email,n=t.password,c=w.a.AES.encrypt(n,T).toString(),e.next=4,N.a.post("".concat(C,"/login"),{credential:{email:a,password:c}}).then((function(e){return e.data}));case 4:return e.abrupt("return",e.sent);case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),R=function(){var e=Object(v.a)(g.a.mark((function e(t){var a,n,c;return g.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=t.email,n=t.password,c=w.a.AES.encrypt(n,T).toString(),e.next=4,N.a.post("".concat(C,"/register"),{credential:{email:a,password:c}}).then((function(e){return e.data}));case 4:return e.abrupt("return",e.sent);case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),P=function(){var e=Object(v.a)(g.a.mark((function e(t){return g.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,N.a.post("".concat(C,"/playlists/"),t).then((function(e){return e.data}));case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),F=function(){var e=Object(v.a)(g.a.mark((function e(t,a){return g.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,N.a.put("".concat(C,"/playlists/").concat(t,"/tracks"),{track:a}).then((function(e){return e.data}));case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})));return function(t,a){return e.apply(this,arguments)}}(),U=function(){var e=Object(v.a)(g.a.mark((function e(t,a){return g.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,N.a.delete("".concat(C,"/playlists/").concat(t,"/tracks"),{data:{track:a}}).then((function(e){return e.data}));case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})));return function(t,a){return e.apply(this,arguments)}}(),S=function(){var e=Object(v.a)(g.a.mark((function e(t,a){return g.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,N.a.put("".concat(C,"/playlists/").concat(t),{name:a}).then((function(e){return e.data}));case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})));return function(t,a){return e.apply(this,arguments)}}(),L=function(){var e=Object(v.a)(g.a.mark((function e(t){return g.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,N.a.delete("".concat(C,"/playlists/").concat(t)).then((function(e){return e.data}));case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),Q=function(){var e=Object(v.a)(g.a.mark((function e(t){return g.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,N.a.put("".concat(C,"/me/library/artists/"),{artist:t}).then((function(e){return e.data}));case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),D=function(){var e=Object(v.a)(g.a.mark((function e(t){return g.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,N.a.delete("".concat(C,"/me/library/artists/"),{data:{artist:t}}).then((function(e){return e.data}));case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),E=function(){var e=Object(v.a)(g.a.mark((function e(t){return g.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,N.a.put("".concat(C,"/me/library/albums/"),{album:t}).then((function(e){return e.data}));case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),K=function(){var e=Object(v.a)(g.a.mark((function e(t){return g.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,N.a.delete("".concat(C,"/me/library/albums/"),{data:{album:t}}).then((function(e){return e.data}));case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),q=function(){var e=Object(v.a)(g.a.mark((function e(t){return g.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,N.a.put("".concat(C,"/me/library/playlists/"),{playlist:t}).then((function(e){return e.data}));case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),B=function(){var e=Object(v.a)(g.a.mark((function e(t){return g.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,N.a.delete("".concat(C,"/me/library/playlists/"),{data:{playlist:t}}).then((function(e){return e.data}));case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),X=function(){var e=Object(l.c)(),t=Object(j.useHistory)(),a=Object(d.b)(),n=Object(c.useState)(""),r=Object(O.a)(n,2),s=r[0],i=r[1],o=Object(c.useState)(""),b=Object(O.a)(o,2),h=b[0],f=b[1],g=Object(c.useState)(!1),v=Object(O.a)(g,2),y=v[0],N=v[1];return Object(m.jsx)(m.Fragment,{children:Object(m.jsxs)("div",{className:"mx-2",children:[Object(m.jsxs)("form",{className:"inputGroup",onSubmit:function(n){n.preventDefault(),N(!0),A({email:s,password:h}).then((function(a){a.token&&(N(!1),e(p(a.token)),e(x(a.id,a.displayName)),t.push("/"))})).catch((function(){N(!1),a.error("Invalid email or password")}))},children:[Object(m.jsxs)("div",{className:"input",children:[Object(m.jsx)("label",{htmlFor:"textEmail",children:"Email address"}),Object(m.jsx)("input",{type:"text",id:"textEmail",placeholder:"Email address",onChange:function(e){return i(e.target.value)}})]}),Object(m.jsxs)("div",{className:"input",children:[Object(m.jsx)("label",{htmlFor:"textPassword",children:"Password"}),Object(m.jsx)("input",{type:"password",id:"textPassword",placeholder:"Password",onChange:function(e){return f(e.target.value)}})]}),Object(m.jsxs)("div",{className:"flex flex-row justify-between",children:[Object(m.jsxs)("div",{children:[Object(m.jsx)("input",{type:"checkbox",id:"checkRemember",className:"mr-1"}),Object(m.jsx)("label",{htmlFor:"checkRemember",children:"Remember me"})]}),Object(m.jsx)("div",{className:"link-text cursor-pointer",onClick:function(){return a.info("Oops! Not yet implemented.")},children:"Forgot your password?"})]}),Object(m.jsx)("input",{type:"submit",value:"Login",className:"h-10 btn btn-primary w-full ".concat(y&&"opacity-40"),disabled:y})]}),Object(m.jsx)("hr",{className:"my-8"}),Object(m.jsxs)("div",{className:"flex flex-col text-center gap-4",children:[Object(m.jsx)("span",{children:"Don't have an account?"}),Object(m.jsx)(u.b,{to:"/signUp",className:"btn border-2 border-secondary-200 dark:border-secondaryDark-200",children:"Sign up now"})]})]})})},H=function(){var e=Object(l.c)(),t=Object(j.useHistory)(),a=Object(d.b)(),n=Object(c.useState)(""),r=Object(O.a)(n,2),s=r[0],i=r[1],o=Object(c.useState)(""),b=Object(O.a)(o,2),h=b[0],f=b[1],g=Object(c.useState)(""),v=Object(O.a)(g,2),y=v[0],N=v[1],k=Object(c.useState)(!1),w=Object(O.a)(k,2),C=w[0],T=w[1];return Object(m.jsx)(m.Fragment,{children:Object(m.jsx)("div",{className:"mx-2",children:Object(m.jsxs)("form",{className:"inputGroup",children:[Object(m.jsxs)("div",{className:"input",children:[Object(m.jsx)("label",{htmlFor:"textEmail",children:"Email address"}),Object(m.jsx)("input",{type:"email",id:"textEmail",placeholder:"Email address",onChange:function(e){return i(e.target.value)}})]}),Object(m.jsxs)("div",{className:"input",children:[Object(m.jsx)("label",{htmlFor:"textPassword",children:"Password"}),Object(m.jsx)("input",{type:"password",id:"textPassword",placeholder:"Password",onChange:function(e){return f(e.target.value)}})]}),Object(m.jsxs)("div",{className:"input",children:[Object(m.jsx)("label",{htmlFor:"textConfirmPassword",children:"Confirm Password"}),Object(m.jsx)("input",{type:"password",id:"textConfirmPassword",placeholder:"Confirm Password",onChange:function(e){return N(e.target.value)}})]}),Object(m.jsx)("button",{className:"bg-primary-100 dark:bg-primaryDark-100 h-10 btn w-full ".concat(C&&"opacity-40"),disabled:C,onClick:function(n){if(n.preventDefault(),T(!0),h!==y)return a.error("The password confirmation does not match"),void T(!1);R({email:s,password:h}).then((function(n){T(!1),n.token?(e(p(n.token)),e(x(n.id,n.displayName)),t.push("/")):a.error("Something went wrong")})).catch((function(){T(!1),a.error("User already exist")}))},children:"Sign Up"}),Object(m.jsxs)("div",{className:"text-center",children:[Object(m.jsx)("span",{children:"Have an account? "}),Object(m.jsx)(u.b,{to:"/login",className:"link-text",children:"Log in"})]})]})})})},M=a(10),I=a.n(M),G=a(11),W=a.p+"static/media/music-choco-dark.8a628ee5.png",z=function(e){var t=e.resetToken,a=Object(l.d)((function(e){return e.userReducer})).displayName,n=Object(c.useState)(!1),r=Object(O.a)(n,2),s=r[0],i=r[1];return Object(m.jsxs)(m.Fragment,{children:[Object(m.jsx)("div",{className:"navbar-placeholder"}),Object(m.jsxs)("div",{className:"navbar navbar-shadow",children:[Object(m.jsx)(u.b,{to:"/",className:"nav-logo w-min",title:"music-choco",children:Object(m.jsx)("img",{src:s?W:b,alt:"music-chcoo"})}),Object(m.jsxs)("div",{className:"nav-items",children:[Object(m.jsxs)(u.b,{to:"/",className:"nav-item",children:[Object(m.jsx)(I.a,{path:G.g,className:"sm:hidden",title:"Home"}),Object(m.jsx)("span",{className:"hidden sm:block",children:"Home"})]}),Object(m.jsxs)(u.b,{to:"/library",className:"nav-item",children:[Object(m.jsx)(I.a,{path:G.j,className:"sm:hidden",title:"Library"}),Object(m.jsx)("span",{className:"hidden sm:block",children:"Library"})]}),Object(m.jsxs)(u.b,{to:"/search",className:"nav-item",children:[Object(m.jsx)(I.a,{path:G.i,className:"sm:hidden",title:"Search"}),Object(m.jsx)("span",{className:"hidden sm:block",children:"Search"})]})]}),Object(m.jsx)("div",{className:"nav-user",onClick:t,onContextMenu:function(){document.documentElement.classList.contains("dark")?(i(!1),document.documentElement.classList.remove("dark")):(i(!0),document.documentElement.classList.add("dark"))},children:a})]})]})},Y=function(e){var t=e.artists;return Object(m.jsx)("div",{className:"artist-list",children:t&&t.map((function(e){return Object(m.jsx)(u.b,{to:"/artist/".concat(e.id),className:"artist-link",title:e.name,children:e.name},"player_track_".concat(e.id))}))})},Z=function(e){var t=e.openQueue,a=e.setOpenQueue,n=e.lapsed,r=e.onPlay,s=e.onPause,i=e.onNextTrack,o=e.onPreviousTrack,d=e.onSeek,j=e.showPlayer,b=e.isLoading,h=e.isPlaying,p=e.onVolumeChange,x=e.playingTrack,f=e.onMuteToggle,g=Object(l.d)((function(e){return e.playerReducer})).volume,v=Object(c.useState)(!1),y=Object(O.a)(v,2),N=y[0],k=y[1],w=Object(c.useState)(!1),C=Object(O.a)(w,2),T=C[0],A=C[1];return j&&Object(m.jsxs)(m.Fragment,{children:[Object(m.jsx)("div",{className:"audio-player-placeholder"}),Object(m.jsxs)("div",{children:[Object(m.jsx)("div",{className:"player-progress",onClick:function(e){return d(e.pageX/e.view.innerWidth)},children:Object(m.jsx)("div",{className:"progress-track",style:{transform:"translateX(".concat(n-100,"%)")},children:Object(m.jsx)("div",{className:"progress-thumb",draggable:!0,onDragEnd:function(e){return d(e.pageX/e.view.innerWidth)}})})}),Object(m.jsxs)("div",{className:"audio-player",children:[Object(m.jsxs)("div",{className:"player-track",children:[Object(m.jsxs)("div",{className:"track-image",children:[b&&Object(m.jsx)("div",{className:"image-loader",children:Object(m.jsx)("div",{className:"loader-wrapper",children:Object(m.jsx)("div",{className:"loader"})})}),Object(m.jsx)(u.b,{to:"/album/".concat(x.album.id),className:"track-image",title:x.album.name,children:Object(m.jsx)("img",{src:x.album.image,alt:x.album.name})})]}),Object(m.jsxs)("div",{className:"track-detail",children:[Object(m.jsx)(u.b,{to:"/album/".concat(x.album.id),className:"track-name",title:x.name,children:Object(m.jsx)("b",{children:x.name})}),Object(m.jsx)(Y,{artists:x.artists})]})]}),Object(m.jsxs)("div",{className:"player-control",children:[Object(m.jsx)("div",{onClick:o,children:Object(m.jsx)(I.a,{path:G.p,title:"Previous",className:"icon-small"})}),h?Object(m.jsx)("div",{onClick:s,children:Object(m.jsx)(I.a,{path:G.k,title:"Pause",className:"icon-medium"})}):Object(m.jsx)("div",{onClick:r,children:Object(m.jsx)(I.a,{path:G.m,title:"Play",className:"icon-medium"})}),Object(m.jsx)("div",{onClick:i,children:Object(m.jsx)(I.a,{path:G.o,title:"Next",className:"icon-small"})})]}),Object(m.jsxs)("div",{className:"player-sub",children:[Object(m.jsxs)("div",{className:"volume-container",onMouseEnter:function(){return A(!0)},onMouseLeave:function(){return A(!1)},children:[Object(m.jsx)("div",{className:"btn-icon",onClick:function(){f(!N),k(!N)},children:N?Object(m.jsx)(I.a,{className:"icon-small",path:G.t,title:"Volume"}):Object(m.jsx)(I.a,{className:"icon-small",path:G.s,title:"Volume"})}),T&&Object(m.jsx)("input",{type:"range",defaultValue:100*g,onChange:function(e){return p(e.target.value/100)}})]}),Object(m.jsx)("div",{className:"open-queue",children:t?Object(m.jsx)("div",{className:"btn-icon",onClick:function(){return a(!1)},children:Object(m.jsx)(I.a,{path:G.c,title:"Hide queue",className:"icon-small"})}):Object(m.jsx)("div",{className:"btn-icon",onClick:function(){return a(!0)},children:Object(m.jsx)(I.a,{path:G.d,title:"Show queue",className:"icon-small"})})})]})]})]})]})},V=function(e){return{type:"SET_PLAYING",playing:e}},J=function(e){return{type:"SET_PLAYING_SONG",track:e}},_=function(e){var t=e.openQueue,a=e.setOpenQueue,n=e.showPlayer,r=Object(c.useRef)(),s=Object(l.c)(),i=Object(l.d)((function(e){return e.playerReducer})),o=i.playingTrack,d=i.playing,u=i.loop,j=i.volume,b=Object(l.d)((function(e){return e.queueReducer})),h=Object(c.useState)(0),p=Object(O.a)(h,2),x=p[0],f=p[1],g=Object(c.useState)(!1),v=Object(O.a)(g,2),y=v[0],N=v[1],k=Object(c.useState)(.5),w=Object(O.a)(k,2),C=w[0],T=w[1];Object(c.useLayoutEffect)((function(){r&&(r.current.volume=j)}),[j]),Object(c.useLayoutEffect)((function(){r&&(d?A():R())}),[d]);var A=function(){r&&(r.current.play().catch((function(e){})),s(V(!0)))},R=function(){r&&(r.current.pause(),s(V(!1)))},P=function(){if(r){var e=b.indexOf(o);e>=b.length-1?u?(s(J(b[0])),A()):(R(),r.current.currentTime=0,f(0)):(s(J(b[e+1])),A())}},F=function(e){s(function(e){return{type:"SET_VOLUME",volume:e}}(e))};return Object(m.jsxs)(m.Fragment,{children:[Object(m.jsx)("audio",{src:o?o.play_url:"",ref:r,onLoadStart:function(){return N(!0)},onCanPlay:function(){N(!1),d?A():R()},onTimeUpdate:function(e){var t=Math.ceil(r.current.duration)-1;t-r.current.currentTime<=.1&&P();var a=r.current.currentTime/t*100;f(a)}}),Object(m.jsx)(Z,{openQueue:t,setOpenQueue:a,lapsed:x,forwardRef:r,onPlay:A,onPause:R,onPreviousTrack:function(){if(r){var e=b.indexOf(o)-1;e>=0?(s(J(b[e])),s(V(!0))):(r.current.currentTime=0,f(0))}},onNextTrack:P,onSeek:function(e){r&&(r.current.currentTime=(Math.ceil(r.current.duration)-1)*e)},showPlayer:n,isLoading:y,isPlaying:d,onVolumeChange:F,playingTrack:o,onMuteToggle:function(e){e?(T(j),F(0)):F(C)}})]})},$=a(29),ee=a(39),te=a(24),ae=function(e){var t=e.loop,a=e.queueData,c=e.playingTrack,r=e.onShuffle,s=e.onDragDrop,i=e.onSetTrack,l=e.onRemoveQueue,o=e.onToggleLoop,d=e.onCloseQueue,j=function(e,t){return e.map((function(e,a){var c=t.id===e.id;return Object(m.jsxs)("div",{children:[Object(m.jsx)(te.b,{id:"queueListContextMenu_".concat(e.id),children:Object(m.jsx)(ee.b,{draggableId:e.id,index:a,children:function(t,a){return Object(m.jsx)("div",Object(n.a)(Object(n.a)(Object(n.a)({onClick:function(t){return function(e,t){e.target.className.includes("link-item")||i(t)}(t,e)},id:e.id,className:c?"queue-item-active":a.isDragging?"queue-item-dragging":"",ref:t.innerRef},t.draggableProps),t.dragHandleProps),{},{datakey:e.id,children:Object(m.jsx)(b,{item:e})}))}})}),Object(m.jsx)(te.a,{id:"queueListContextMenu_".concat(e.id),children:Object(m.jsx)(te.c,{onClick:function(){return l(e)},children:"Remove from queue"})},e.id+"test")]},"queue_".concat(e.id))}))},b=function(e){var t,a=e.item;return Object(m.jsxs)("li",{className:"queue-item",children:[Object(m.jsxs)("div",{className:"item-title",children:[Object(m.jsx)("b",{children:a.name}),Object(m.jsx)(Y,{artists:a.artists})]}),Object(m.jsx)("div",{className:"item-album",children:Object(m.jsx)(u.b,{to:"/album/".concat(a.album.id),className:"link-item",title:a.album.name,children:a.album.name})}),Object(m.jsx)("div",{className:"text-right",children:(t=a.duration,(t/60<10?"0":"")+Math.floor(t/60)+":"+(t%60<10?"0":"")+Math.floor(t%60))})]})};return Object(m.jsxs)("div",{className:"queue-container",children:[Object(m.jsxs)("div",{className:"queue-header",children:[Object(m.jsx)("h1",{className:"title",children:"Up Next"}),Object(m.jsxs)("div",{className:"queue-header-buttons",children:[Object(m.jsxs)("div",{className:"queue-util",children:[Object(m.jsx)("div",{className:"btn-icon ".concat(t?"active":""),onClick:o,children:Object(m.jsx)(I.a,{path:G.q,title:"Loop"})}),Object(m.jsx)("div",{className:"btn-icon",onClick:r,children:Object(m.jsx)(I.a,{path:G.n,title:"Shuffle"})})]}),Object(m.jsx)("div",{className:"queue-btn-close",children:Object(m.jsx)(I.a,{className:"btn-icon",path:G.e,title:"Hide queue",onClick:d})})]})]}),Object(m.jsx)(ee.a,{onDragEnd:s,children:Object(m.jsx)(ee.c,{droppableId:"droppable",children:function(e){return Object(m.jsxs)("ul",Object(n.a)(Object(n.a)({},e.droppableProps),{},{ref:e.innerRef,children:[j(a,c),e.placeholder]}))}})})]})},ne=function(e){return{type:"SET_QUEUE",queue:e}},ce=function(e){return{type:"ADD_QUEUE",item:e}},re=function(e){var t=e.openQueue,a=e.setOpenQueue,n=e.location,r=Object(l.c)(),s=Object(l.d)((function(e){return e.queueReducer})),i=Object(l.d)((function(e){return e.playerReducer})),o=i.playingTrack,d=i.loop;Object(c.useEffect)((function(){a(!1)}),[n]);return Object(m.jsx)(m.Fragment,{children:t&&Object(m.jsx)(ae,{loop:d,queueData:s,playingTrack:o,onShuffle:function(){var e=Object($.a)(s);e.splice(e.indexOf(o),1);var t=Object($.a)(e).sort((function(){return Math.random()-.5}));r(ne([o].concat(Object($.a)(t))))},onDragDrop:function(e){if(e.destination){var t=Object($.a)(s),a=t.splice(e.source.index,1),n=Object(O.a)(a,1)[0];t.splice(e.destination.index,0,n),r(ne(t))}},onSetTrack:function(e){r(J(e)),r(V(!0))},onRemoveQueue:function(e){var t=s.indexOf(e);t===s.indexOf(o)&&0!==s.length&&(t===s.length-1?r(J(s[t-1])):r(J(s[t+1])));var a=s.filter((function(e,a){return a!==t}));r(ne(a))},onToggleLoop:function(){r(function(e){return{type:"SET_LOOP",loop:e}}(!d))},onCloseQueue:function(){a(!1)}})})},se=function(e){var t=e.children,a=e.setLoggedIn,n=Object(l.c)(),r=Object(j.useLocation)(),s=Object(c.useState)(!1),i=Object(O.a)(s,2),o=i[0],d=i[1],u=Object(l.d)((function(e){return e.queueReducer}));Object(c.useEffect)((function(){0===u.length&&d(!1)}),[u]),Object(c.useEffect)((function(){document.getElementById("window").scrollTo(0,0)}),[r]);return Object(m.jsxs)("div",{onContextMenu:function(e){e.preventDefault()},className:"min-h-screen bg-background dark:bg-backgroundDark",children:[Object(m.jsx)("div",{id:"modal"}),Object(m.jsx)(z,{resetToken:function(){a(!1),n({type:"LOGOUT"}),window.location.reload()}}),Object(m.jsxs)("div",{id:"window",className:"w-full overflow-y-auto",children:[Object(m.jsx)("div",{className:o?"hidden":"block",children:t}),Object(m.jsx)(re,{openQueue:o,setOpenQueue:d,location:r})]}),Object(m.jsx)(_,{openQueue:o,setOpenQueue:d,showPlayer:0!==u.length})]})},ie=a(6),le=function(e){var t=e.id;return Object(m.jsx)("div",{children:Object(m.jsxs)("div",{className:"track-item",children:[Object(m.jsx)(ie.a,{className:"ml-4",width:"1rem"}),Object(m.jsxs)("div",{className:"items gap-4",children:[Object(m.jsxs)("div",{children:[Object(m.jsx)(ie.a,{}),Object(m.jsx)("div",{className:"artist-list h-6",children:Object(m.jsx)(ie.a,{className:"link-item"})})]}),Object(m.jsx)(ie.a,{}),Object(m.jsx)(ie.a,{className:"text-left"})]})]})},"track_skeleton_".concat(t))},oe=function(e){var t=e.album,a=void 0!==t&&t;return Object(m.jsxs)(m.Fragment,{children:[Object(m.jsxs)("div",{className:"track-header",children:[Object(m.jsx)("div",{className:"number",children:"#"}),Object(m.jsxs)("div",{className:"items",children:[Object(m.jsx)("h3",{className:a?"col-span-2":"col-span-3",children:"Track"}),Object(m.jsx)("span",{children:a?"Album":""})]}),Object(m.jsx)("span",{className:"text-right w-20 pr-8",children:"Duration"})]}),Object(m.jsx)("hr",{className:"border-b border-primary-100 dark:border-primaryDark-100 mx-2"})]})},de=function(e){var t=Object(l.c)(),a=Object(d.b)(),n=Object(c.useState)(null),r=Object(O.a)(n,2),s=r[0],i=r[1],o=Object(c.useState)(!0),u=Object(O.a)(o,2),j=u[0],b=u[1],m=Object(c.useState)(null),h=Object(O.a)(m,2),p=h[0],x=h[1],f=new AbortController,g=function(){N()({method:"get",url:"".concat("https://music-choco.herokuapp.com").concat(e),signal:f.signal}).then((function(e){i(e.data),b(!1)})).catch((function(e){if("canceled"!==e.message){if(401===e.response.status)return t({type:"LOGOUT"}),a.show("Token expired. Please login again."),function(){return f.abort()};x(e),b(!1)}}))};return Object(c.useEffect)((function(){return g(),function(){return f.abort()}}),[e]),{data:s,isLoading:j,error:p,fetchData:g}},ue=function(e){var t=e.header,a=e.children,n=e.open,c=e.onConfirm,i=e.onCancel,l=void 0===i?null:i,o=r.a.useState(!1),d=Object(O.a)(o,2),u=d[0],j=d[1];r.a.useEffect((function(){j(!0)}),[]);return n&&u?Object(s.createPortal)(Object(m.jsx)("div",{className:"modal-container",onMouseDown:function(e){"modal-container"===e.target.className&&l()},children:Object(m.jsxs)("div",{children:[Object(m.jsx)("h2",{className:"title2",children:t}),Object(m.jsxs)("div",{children:[Object(m.jsx)("div",{className:"mb-4",children:a}),Object(m.jsxs)("div",{className:"flex gap-2",children:[l&&Object(m.jsx)("button",{className:"w-full",onClick:l,children:"Cancel"}),Object(m.jsx)("button",{className:"btn-primary w-full",onClick:c,children:"Confirm"})]})]})]})}),document.getElementById("modal")):null},je=function(e){var t=e.t,a=e.children,n=e.i,r=e.album,s=void 0!==r&&r,i=Object(l.c)(),o=Object(d.b)(),j=Object(c.useState)(!1),b=Object(O.a)(j,2),h=b[0],p=b[1],x=Object(c.useState)(""),f=Object(O.a)(x,2),g=f[0],v=f[1],y=Object(l.d)((function(e){return e.playerReducer})).playingTrack,N=Object(l.d)((function(e){return e.queueReducer})),k=de("/me/library/playlists"),w=k.data,C=k.isLoading,T=k.fetchData,A=function(e){0===N.length&&(i(J(e)),i(V(!1))),0===N.filter((function(t){return t.id===e.id})).length&&i(ce(e))},R=function(e){A(e),y&&e.id!==y.id&&i(J(e)),i(V(!0))},U=function(e){F(e,t.id).then((function(){return o.show("Added to playlist")}))},S=function(){P({name:g}).then((function(e){T(),o.show("Playlist created"),U(e.id),p(!1)}))};return Object(m.jsxs)("div",{children:[Object(m.jsx)(ue,{header:"New Playlist",open:h,onConfirm:S,onCancel:function(){return p(!1)},children:Object(m.jsxs)("div",{className:"flex flex-col gap-1",children:[Object(m.jsx)("label",{htmlFor:"textInput",children:Object(m.jsx)("b",{children:"Name"})}),Object(m.jsx)("input",{id:"textInput",type:"text",placeholder:"Playlist name",autoFocus:!0,onChange:function(e){return v(e.target.value)},onKeyDown:function(e){"Enter"===e.key?S():"Escape"===e.key&&p(!1)},className:"border-b border-primary-200 dark:border-primaryDark-200 px-2 py-1"})]})}),Object(m.jsx)(te.b,{id:"songListContextMenu_".concat(t.id),children:Object(m.jsx)("div",{onClick:function(e){e.target.className.includes("link-item")||R(t)},children:Object(m.jsxs)("div",{className:"track-item cursor-pointer ".concat(y&&y.id===t.id?"bg-primary-100 hover:bg-primary-200 dark:bg-primaryDark-100 dark:hover:bg-primaryDark-200":""),children:[Object(m.jsx)("div",{className:"number",children:n}),Object(m.jsxs)("div",{className:"items",children:[Object(m.jsxs)("div",{className:s?"col-span-2":"col-span-3",children:[Object(m.jsx)("h3",{className:"font-bold",children:t.name}),Object(m.jsx)(Y,{artists:t.artists})]}),s?Object(m.jsx)(u.b,{to:"/album/".concat(t.album.id),className:"link-item",title:t.album.name,children:t.album.name}):Object(m.jsx)("span",{})]}),Object(m.jsxs)("span",{className:"text-right w-20 pr-4",children:[(t.duration/60<10?"0":"")+Math.floor(t.duration/60),":",(t.duration%60<10?"0":"")+Math.floor(t.duration%60)]}),Object(m.jsx)("hr",{})]})})}),Object(m.jsxs)(te.a,{id:"songListContextMenu_".concat(t.id),children:[Object(m.jsx)(te.c,{onClick:function(){return R(t)},children:"Play"}),Object(m.jsx)(te.c,{onClick:function(){return A(t)},children:"Add to queue"}),Object(m.jsxs)(te.d,{title:"Add to playlist",children:[Object(m.jsx)(te.c,{onClick:function(){return p(!0)},children:"Add to new playlist"}),Object(m.jsx)("hr",{className:"border-t border-primary-300 dark:border-primaryDark-300 mx-2"}),!C&&w.items.map((function(e){return Object(m.jsx)(te.c,{onClick:function(){return U(e.id)},children:e.name},"track_item_ctx_".concat(e.id))}))]}),Object(m.jsx)("hr",{className:"border-t border-background dark:border-backgroundDark mx-2"}),a]})]},"track_item_".concat(t.id))},be=function(){return Object(m.jsxs)("div",{className:"w-screen h-screen flex flex-col items-center justify-center gap-4 text-center",children:[Object(m.jsx)("h2",{className:"text-4xl font-bold my-2",children:"Oops!"}),Object(m.jsx)("p",{children:"Something went wrong while loding the page."}),Object(m.jsx)(u.b,{to:"/",className:"btn-primary btn",children:"Back to homepage"})]})},me=function(){var e=Object(j.useParams)().id,t=Object(l.c)(),a=Object(d.b)(),n=Object(c.useState)(null),r=Object(O.a)(n,2),s=r[0],i=r[1],o=Object(c.useState)(!1),u=Object(O.a)(o,2),b=u[0],h=u[1],p=Object(c.useState)(!1),x=Object(O.a)(p,2),f=x[0],g=x[1],v=Object(l.d)((function(e){return e.playerReducer})).playingTrack,y=Object(l.d)((function(e){return e.queueReducer})),N=de("/albums/".concat(e,"/")),k=N.data,w=N.isLoading,C=N.error,T=de("/albums/".concat(e,"/tracks")),A=T.data,R=T.isLoading,P=T.error,F=de("/me/library/albums"),U=F.data,S=F.isLoading,L=F.error,Q=function(e){0===y.length&&(t(V(!1)),t(J(e))),0===y.filter((function(t){return t.id===e.id})).length&&t(ce(e))};return C||P||L?Object(m.jsx)(be,{}):Object(m.jsx)("div",{className:"page-content",children:Object(m.jsxs)("div",{className:"flex flex-col gap-6",children:[Object(m.jsxs)("div",{className:"flex items-center gap-4 sm:gap-8 flex-col sm:flex-row",children:[w&&R?Object(m.jsx)(ie.a,{className:"border border-background dark:border-backgroundDark",style:{width:"12rem",height:"12rem"}}):f&&Object(m.jsx)(ie.a,{style:{height:"12rem"}})||Object(m.jsx)("img",{src:k&&k.image,alt:k&&k.name,className:"w-full h-full sm:w-48 sm:h-48 border border-background dark:border-backgroundDark",onLoad:function(){return g(!1)}}),Object(m.jsxs)("div",{className:"w-full sm:w-full flex flex-col gap-4",children:[Object(m.jsxs)("div",{children:[Object(m.jsx)("h1",{className:"title",children:k&&k.name}),k&&Object(m.jsx)(Y,{artists:k.artists}),Object(m.jsxs)("p",{className:"w-full mt-2",children:["Tracks: ",!R&&A.count]})]}),Object(m.jsxs)("div",{className:"flex justify-start gap-2",children:[Object(m.jsx)("button",{className:"btn-primary w-1/2 md:w-48",onClick:function(){A.items.forEach((function(e,a){0===a?(Q(e),v&&e.id!==v.id&&t(J(e)),t(V(!0))):Q(e)}))},children:"Play"}),!S&&(function(){if(w||S)return!0;var e=U.items.map((function(e){return e.id}));return null!==s?s:e.includes(k.id)}()?Object(m.jsx)("button",{className:"btn-secondary w-1/2 md:w-48",onClick:function(){h(!0),K(e).then((function(){i(!1),a.show("Album removed"),h(!1)})).catch((function(){h(!1),a.error("Something went wrong when removing artist")}))},disabled:b,children:"Remove from Library"}):Object(m.jsx)("button",{className:"btn-primary-border w-1/2 md:w-48",onClick:function(){h(!0),E(e).then((function(){i(!0),a.show("Album added"),h(!1)})).catch((function(){h(!1),a.error("Something went wrong when adding album")}))},disabled:b,children:"Add to Library"}))]})]})]}),Object(m.jsxs)("div",{children:[Object(m.jsx)("h2",{className:"title2",children:"Tracks"}),Object(m.jsx)(oe,{}),R?[1,2,3,4,5].map((function(e,t){return Object(m.jsx)(le,{id:t},t)})):A.items.map((function(e,t){return Object(m.jsx)(je,{t:e,i:e.track_number},t)}))]})]})})},he=function(e){var t=e.album,a=Object(c.useState)(!0),n=Object(O.a)(a,2),r=n[0],s=n[1];return Object(m.jsxs)("div",{className:"card-container",children:[Object(m.jsxs)(u.b,{className:"card",to:"/album/".concat(t.id),title:t.name,children:[Object(m.jsx)("img",{className:r?"hidden":"",src:t.image,alt:t.name,onLoad:function(){return s(!1)}}),r&&Object(m.jsx)(ie.a,{height:240}),Object(m.jsx)("h2",{className:"title2 mt-2",children:t.name})]}),Object(m.jsx)(Y,{artists:t.artists})]})},Oe=function(){var e=Object(j.useParams)().id,t=Object(l.c)(),a=Object(d.b)(),n=Object(c.useState)(null),r=Object(O.a)(n,2),s=r[0],i=r[1],o=Object(c.useState)(!1),u=Object(O.a)(o,2),b=u[0],h=u[1],p=Object(l.d)((function(e){return e.playerReducer})).playingTrack,x=Object(l.d)((function(e){return e.queueReducer})),f=de("/artists/".concat(e,"/")),g=f.data,v=f.isLoading,y=f.error,N=de("/artists/".concat(e,"/albums")),k=N.data,w=N.isLoading,C=N.error,T=de("/artists/".concat(e,"/tracks")),A=T.data,R=T.isLoading,P=T.error,F=de("/me/library/artists"),U=F.data,S=F.isLoading,L=F.error,E=function(e){0===x.length&&(t(V(!1)),t(J(e))),0===x.filter((function(t){return t.id===e.id})).length&&t(ce(e))};return y||C||P||L?Object(m.jsx)(be,{}):Object(m.jsx)("div",{className:"page-content",children:Object(m.jsxs)("div",{className:"flex flex-col gap-8",children:[Object(m.jsx)("div",{className:"flex items-center gap-8",children:v?Object(m.jsxs)(m.Fragment,{children:[Object(m.jsx)(ie.a,{borderRadius:100,width:"12rem",height:"12rem"}),Object(m.jsx)(ie.a,{width:"10rem",className:"title"})]}):Object(m.jsxs)(m.Fragment,{children:[Object(m.jsx)("img",{src:g&&g.image,alt:g&&g.name,className:"w-48 h-48 border border-primary-200 dark:border-primaryDark-200 rounded-full"}),Object(m.jsxs)("div",{className:"w-full",children:[Object(m.jsx)("h1",{className:"title",children:g&&g.name}),Object(m.jsxs)("div",{className:"flex justify-start gap-2",children:[Object(m.jsx)("button",{className:"btn-primary w-1/2 md:w-48",onClick:function(){A.items.forEach((function(e,a){0===a?(E(e),p&&e.id!==p.id&&t(J(e)),t(V(!0))):E(e)}))},children:"Play"}),!S&&(function(){if(v||S)return!0;var e=U.items.map((function(e){return e.id}));return null!==s?s:e.includes(g.id)}()?Object(m.jsx)("button",{className:"btn-secondary w-1/2 md:w-48",onClick:function(){h(!0),D(e).then((function(){i(!1),a.show("Artist removed"),h(!1)})).catch((function(){h(!1),a.error("Something went wrong when removing artist")}))},disabled:b,children:"Remove from Library"}):Object(m.jsx)("button",{className:"btn-primary-border w-1/2 md:w-48",onClick:function(){h(!0),Q(e).then((function(){i(!0),a.show("Artist added"),h(!1)})).catch((function(){h(!1),a.error("Something went wrong when adding artist")}))},disabled:b,children:"Add to Library"}))]})]})]})}),Object(m.jsxs)("div",{children:[Object(m.jsx)("h2",{className:"title2",children:"Tracks"}),Object(m.jsx)(oe,{album:!0}),R?[1,2,3,4,5].map((function(e,t){return Object(m.jsx)(le,{id:t},t)})):A.items.map((function(e,t){return Object(m.jsx)(je,{t:e,i:t+1,album:!0},t)}))]}),Object(m.jsxs)("div",{children:[Object(m.jsx)("h2",{className:"title2",children:"Albums"}),Object(m.jsx)("div",{className:"card-list",children:w?[1,2,3].map((function(e,t){return Object(m.jsxs)("div",{className:"card",children:[Object(m.jsxs)("div",{className:"card-link",children:[Object(m.jsx)(ie.a,{height:240,width:240}),Object(m.jsx)(ie.a,{className:"title2 mt-4"})]}),Object(m.jsx)("div",{className:"artist-list h-6",children:Object(m.jsx)(ie.a,{className:"linkItem"})})]},"album_skeleton_".concat(t))})):k.items.map((function(e){return Object(m.jsx)(he,{album:e},e.id)}))})]})]})})},pe=function(e){var t=e.artist,a=Object(c.useState)(!1),n=Object(O.a)(a,2),r=n[0],s=n[1];return Object(m.jsxs)(u.b,{to:"/artist/".concat(t.id),className:"card-container border border-primary-100 dark:border-primaryDark-100 hover:shadow-md",title:t.name,children:[Object(m.jsxs)("div",{className:"card",children:[Object(m.jsx)("img",{className:r?"":"hidden",src:t.image,alt:t.name,onLoad:function(){return s(!0)}}),!r&&Object(m.jsx)(ie.a,{height:240})]}),Object(m.jsx)("div",{className:"m-2",children:Object(m.jsx)("h2",{className:"title2 mt-3",children:t.name})})]})},xe=function(){var e=de("/featured-artists"),t=e.data,a=e.isLoading,n=e.error,c=de("/new-release"),r=c.data,s=c.isLoading,i=c.error;return n||i?Object(m.jsx)(be,{}):Object(m.jsx)("div",{className:"page-content",children:Object(m.jsxs)(m.Fragment,{children:[Object(m.jsxs)("div",{children:[Object(m.jsx)("h2",{className:"title",children:"New Release"}),Object(m.jsx)("div",{className:"card-list",children:s?[1,2,3,4,5].map((function(e,t){return a=t,Object(m.jsxs)("div",{children:[Object(m.jsxs)("div",{children:[Object(m.jsx)(ie.a,{height:240,width:240}),Object(m.jsx)(ie.a,{className:"title2 mt-4"})]}),Object(m.jsx)(ie.a,{})]},"album_skeleton_".concat(a));var a})):r.reverse().map((function(e){return Object(m.jsx)(he,{album:e},"card_".concat(e.id))}))})]}),Object(m.jsxs)("div",{children:[Object(m.jsx)("h2",{className:"title",children:"Featured Artists"}),Object(m.jsx)("div",{className:"card-list",children:a?[1,2,3].map((function(e,t){return a=t,Object(m.jsxs)("div",{children:[Object(m.jsx)("div",{children:Object(m.jsx)(ie.a,{height:240,width:240})}),Object(m.jsx)(ie.a,{className:"title2 mt-3 m-2"})]},"artist_skeleton_".concat(a));var a})):t.map((function(e){return Object(m.jsx)(pe,{artist:e},"card_".concat(e.id))}))})]})]})})},fe="data:image/png;base64,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",ge=function(){var e=de("/me/library/playlists"),t=e.data,a=e.isLoading,n=e.error,c=de("/me/library/albums"),r=c.data,s=c.isLoading,i=c.error,l=de("/me/library/artists"),o=l.data,d=l.isLoading,j=l.error;return n||i||j?Object(m.jsx)(be,{}):Object(m.jsxs)("div",{className:"page-content",children:[Object(m.jsx)("h1",{className:"title",children:"Library"}),!a&&0===t.total&&!s&&0===r.total&&!d&&0===o.total&&Object(m.jsxs)(m.Fragment,{children:[Object(m.jsx)("div",{children:"You have not added anything into your library."}),Object(m.jsx)(u.b,{to:"/",className:"btn btn-primary w-max",children:"Go to Homepage"})]}),Object(m.jsxs)("div",{className:"library-items",children:[!a&&0!==t.total&&Object(m.jsx)("h2",{className:"title2",children:"Playlists"}),a?Object(m.jsxs)("div",{className:"library-item",children:[Object(m.jsx)(ie.a,{height:"8rem",className:"m-0.5 p-2"}),Object(m.jsx)(ie.a,{})]}):t.items.map((function(e){return Object(m.jsxs)(u.b,{to:"/playlist/".concat(e.id),className:"library-item hover:bg-primary-50 dark:hover:bg-primaryDark-50 object-scale-down",children:[Object(m.jsx)("div",{className:"library-image",children:Object(m.jsx)("img",{src:e.image,alt:e.name,onError:function(e){return e.target.src=fe}})}),Object(m.jsx)("div",{className:"library-name",children:e.name})]},e.id)}))]}),Object(m.jsxs)("div",{className:"library-items",children:[!s&&0!==r.total&&Object(m.jsx)("h2",{className:"title2",children:"Albums"}),s?Object(m.jsxs)("div",{className:"library-item",children:[Object(m.jsx)(ie.a,{height:"8rem",className:"m-0.5 p-2"}),Object(m.jsx)(ie.a,{})]}):r.items.map((function(e){return Object(m.jsxs)(u.b,{to:"/album/".concat(e.id),className:"library-item hover:bg-primary-50 dark:hover:bg-primaryDark-50 object-scale-down",children:[Object(m.jsx)("div",{className:"library-image",children:Object(m.jsx)("img",{src:e.image,alt:e.name})}),Object(m.jsx)("div",{className:"library-name",children:e.name})]},e.id)}))]}),Object(m.jsxs)("div",{className:"library-items",children:[!d&&0!==o.total&&Object(m.jsx)("h2",{className:"title2",children:"Artists"}),d?Object(m.jsxs)("div",{className:"library-item",children:[Object(m.jsx)(ie.a,{height:"8rem",className:"m-0.5 p-2"}),Object(m.jsx)(ie.a,{})]}):o.items.map((function(e){return Object(m.jsxs)(u.b,{to:"/artist/".concat(e.id),className:"library-item hover:bg-primary-50 dark:hover:bg-primaryDark-50 object-scale-down",children:[Object(m.jsx)("div",{className:"library-image",children:Object(m.jsx)("img",{src:e.image,alt:e.name})}),Object(m.jsx)("div",{className:"library-name",children:e.name})]},e.id)}))]})]})},ve=function(){var e=Object(j.useParams)().id,t=Object(l.c)(),a=Object(j.useHistory)(),n=Object(d.b)(),r=Object(c.useState)(null),s=Object(O.a)(r,2),i=s[0],o=s[1],u=Object(c.useState)(!1),b=Object(O.a)(u,2),h=b[0],p=b[1],x=Object(c.useState)(!1),f=Object(O.a)(x,2),g=f[0],v=f[1],y=Object(c.useState)(!1),N=Object(O.a)(y,2),k=N[0],w=N[1],C=Object(c.useState)(""),T=Object(O.a)(C,2),A=T[0],R=T[1],P=Object(l.d)((function(e){return e.playerReducer})).playingTrack,F=Object(l.d)((function(e){return e.queueReducer})),Q=Object(l.d)((function(e){return e.userReducer})).uid,D=de("/playlists/".concat(e,"/")),E=D.data,K=D.isLoading,X=D.error,H=de("/playlists/".concat(e,"/tracks")),M=H.data,W=H.isLoading,z=H.error,Y=H.fetchData,Z=de("/me/library/playlists"),_=Z.data,$=Z.isLoading,ee=Z.error,ae=function(e){0===F.length&&(t(V(!1)),t(J(e))),0===F.filter((function(t){return t.id===e.id})).length&&t(ce(e))},ne=function(){S(e,A).then((function(){v(!1),n.show("Playlist name updated"),a.go(0)}))};return X||z||ee?Object(m.jsx)(be,{}):Object(m.jsxs)("div",{className:"page-content",children:[Object(m.jsx)(ue,{header:"Edit playlist",open:g,onConfirm:ne,onCancel:function(){return v(!1)},children:!K&&Object(m.jsxs)("div",{className:"flex flex-col gap-1",children:[Object(m.jsx)("label",{htmlFor:"textInput",children:Object(m.jsx)("b",{children:"Name"})}),Object(m.jsx)("input",{id:"textInput",type:"text",placeholder:"Playlist name",defaultValue:E.name,autoFocus:!0,onChange:function(e){return R(e.target.value)},onKeyDown:function(e){"Enter"===e.key?ne():"Escape"===e.key&&v(!1)},className:"border-b border-primary-200 dark:border-primaryDark-200 px-2 py-1"})]})}),Object(m.jsx)(ue,{header:"Delete playlist",open:k,onConfirm:function(){L(e).then((function(){w(!1),n.show("Playlist removed"),a.goBack()}))},onCancel:function(){return w(!1)},children:!K&&Object(m.jsxs)(m.Fragment,{children:["Are you sure that you want to delete"," ",Object(m.jsx)("b",{children:E.name})]})}),Object(m.jsxs)("div",{className:"grid sm:grid-cols-3 md:grid-cols-4 gap-4",children:[K?Object(m.jsxs)("div",{className:"w-full",children:[Object(m.jsx)(ie.a,{className:"m-2 ml-0",style:{aspectRatio:"1"}}),Object(m.jsx)(ie.a,{className:"title"}),Object(m.jsx)(ie.a,{count:3}),Object(m.jsx)("button",{className:"btn-primary w-full mt-2",children:"Play"}),Object(m.jsx)("button",{className:"btn-primary-border w-full mt-2 ",children:"Add to library"})]}):Object(m.jsxs)("div",{className:"w-full",children:[Object(m.jsx)("div",{className:"border border-primary-200 dark:border-primaryDark-200 m-2 ml-0 text-center",children:Object(m.jsx)("img",{src:E.image,alt:"Playlist Thumbnail",className:"m-auto",onError:function(e){e.target.src=fe}})}),Object(m.jsx)("h1",{className:"title",children:E.name}),Object(m.jsxs)("div",{children:[Object(m.jsx)("b",{children:E.owner.displayName}),Object(m.jsxs)("p",{children:[Object(m.jsx)("i",{children:"Last Update: "}),Object(m.jsx)("br",{className:"hidden sm:block"}),function(e){var t=new Date(e),a=t.getMonth(),n=a>=10?a+1:"0".concat(a+1),c=t.getDate();return"".concat(t.getFullYear(),"-").concat(n,"-").concat(c)}(E.updatedAt)]})]}),Object(m.jsxs)("div",{children:["Tracks: ",E.tracks.total]}),Object(m.jsxs)("div",{className:"flex",children:[Object(m.jsx)("div",{className:"rounded-full hover:bg-primary-200 dark:hover:bg-primaryDark-200 p-1 cursor-pointer",onClick:function(){return v(!0)},children:Object(m.jsx)(I.a,{path:G.l,className:"icon-small fill-current text-primary-300 dark:text-primaryDark-300",title:"Edit playlist"})}),Object(m.jsx)("div",{className:"rounded-full hover:bg-primary-200 dark:hover:bg-primaryDark-200 p-1 cursor-pointer",onClick:function(){return w(!0)},children:Object(m.jsx)(I.a,{path:G.r,className:"icon-small fill-current text-primary-300 dark:text-primaryDark-300",title:"Delete playlist"})})]}),Object(m.jsx)("button",{className:"btn-primary w-full mt-2",onClick:function(){M.items.forEach((function(e,a){0===a?(ae(e),P&&e.id!==P.id&&t(J(e)),t(V(!0))):ae(e)}))},children:"Play"}),!$&&E.owner.id!==Q&&(function(){if(K||$)return!0;var e=_.items.map((function(e){return e.id}));return null!==i?i:e.includes(E.id)}()?Object(m.jsx)("button",{className:"btn-secondary w-full mt-2",onClick:function(){p(!0),B(e).then((function(){o(!1),n.show("Playlist removed"),p(!1)})).catch((function(){p(!1),n.error("Something went wrong when removing album")}))},disabled:h,children:"Remove from Library"}):Object(m.jsx)("button",{className:"btn-primary-border w-full mt-2",onClick:function(){p(!0),q(e).then((function(){o(!0),n.show("Playlist added"),p(!1)})).catch((function(){p(!1),n.error("Something went wrong when adding album")}))},disabled:h,children:"Add to Library"}))]}),W?Object(m.jsxs)("div",{className:"sm:col-span-2 md:col-span-3",children:[Object(m.jsx)("h2",{className:"title2",children:"Tracks"}),Object(m.jsx)(oe,{}),[1,2,3,4,5].map((function(e,t){return Object(m.jsx)(le,{id:t},t)}))]}):Object(m.jsxs)("div",{className:"sm:col-span-2 md:col-span-3",children:[Object(m.jsx)("h2",{className:"title2",children:"Tracks"}),Object(m.jsx)(oe,{}),0===M.total&&Object(m.jsx)("div",{className:"flex justify-center mt-4",children:Object(m.jsx)("p",{children:"This playlist is currently empty"})}),M.items.map((function(t,a){return Object(m.jsx)(je,{t:t,i:a+1,children:Object(m.jsx)(te.c,{onClick:function(){return function(t){U(e,t).then((function(){Y(),n.show("Removed from playlist")}))}(t.id)},children:"Remove from this playlist"})},a)}))]})]})]})},ye=a(57),Ne=function(){return Object(m.jsxs)("div",{className:"w-screen h-screen flex flex-col items-center justify-center gap-4 text-center",children:[Object(m.jsx)("h2",{className:"text-4xl font-bold my-2",children:"Oops!"}),Object(m.jsx)("p",{className:"font-bold uppercase",children:"404 - Page not Found"}),Object(m.jsxs)("p",{children:["The page you are looking for might have been removed ",Object(m.jsx)("br",{}),"or is temporary unavailable."]}),Object(m.jsx)(ye.Link,{to:"/",className:"btn btn-primary",children:"Back to homepage"})]})},ke=a(58),we=a(59),Ce=function(){var e=function(){function e(){Object(ke.a)(this,e),this.requesting=!1,this.stack=[]}return Object(we.a)(e,[{key:"add",value:function(e){var t=this;return this.stack.length<2?new Promise((function(a,n){t.stack.push(e),t.makeQuery()})):new Promise((function(a,n){t.stack[1]=e,t.makeQuery()}))}},{key:"makeQuery",value:function(){var e=this;if(!this.stack.length||this.requesting)return null;this.requesting=!0,N.a.post("".concat("https://music-choco.herokuapp.com","/search"),{q:this.stack[0]}).then((function(t){r(t.data),o(!1),e.requesting=!1,e.stack.splice(0,1),e.makeQuery()}))}}]),e}(),t=Object(c.useState)(null),a=Object(O.a)(t,2),n=a[0],r=a[1],s=Object(c.useState)(!1),i=Object(O.a)(s,2),l=i[0],o=i[1],d=Object(c.useRef)(),j=new e,b=function(e){""!==e&&e&&(o(!0),j.add(e))};return Object(m.jsxs)("div",{className:"page-content",children:[Object(m.jsx)("h1",{className:"title",children:"Search"}),Object(m.jsx)("div",{children:Object(m.jsxs)("div",{className:"border flex px-2 py-1 gap-2 items-center",children:[Object(m.jsx)(u.b,{to:"/",className:"btn-icon",children:Object(m.jsx)(I.a,{path:G.a,className:"icon-small"})}),Object(m.jsx)("input",{type:"text",className:"w-full py-0.5 px-1 outline-none",ref:d,autoFocus:!0,onChange:function(e){return b(e.target.value)},onKeyDown:function(e){"Enter"===e.key&&b()}}),Object(m.jsx)("div",{className:"btn-icon",onClick:function(){d.current.focus(),d.current.value=""},children:Object(m.jsx)(I.a,{path:G.e,className:"icon-small"})})]})}),Object(m.jsxs)("div",{className:"flex flex-col gap-4",children:[l&&Object(m.jsx)("div",{className:"flex h-full justify-center mt-8",children:Object(m.jsx)("div",{className:"loader"})}),!l&&n&&0===n.tracks.total&&0===n.artists.total&&0===n.albums.total&&Object(m.jsx)("div",{children:"No result found."}),!l&&n&&n.tracks.total>0&&Object(m.jsxs)("div",{children:[Object(m.jsx)("h2",{className:"title2",children:"Tracks"}),Object(m.jsxs)("div",{children:[Object(m.jsx)(oe,{album:!0}),n.tracks.items.map((function(e,t){return Object(m.jsx)(je,{i:t+1,t:e,album:!0},"search_track_".concat(e.id))}))]})]}),!l&&n&&n.artists.total>0&&Object(m.jsxs)("div",{children:[Object(m.jsx)("h2",{className:"title2",children:"Artists"}),Object(m.jsx)("div",{className:"card-list",children:n.artists.items.map((function(e){return Object(m.jsx)(pe,{artist:e},"search_artist_".concat(e.id))}))})]}),!l&&n&&n.albums.total>0&&Object(m.jsxs)("div",{children:[Object(m.jsx)("h2",{className:"title2",children:"Albums"}),Object(m.jsx)("div",{className:"card-list",children:n.albums.items.map((function(e){return Object(m.jsx)(he,{album:e},"search_album_".concat(e.id))}))})]})]})]})},Te=function(){var e=Object(l.d)((function(e){return e.userReducer})).token;return Object(m.jsx)(u.a,{basename:"http://localhost:8080",children:e?Object(m.jsx)(se,{setLoggedIn:function(){},children:Object(m.jsxs)(j.Switch,{children:[Object(m.jsx)(j.Route,{path:"/artist/:id",component:Oe}),Object(m.jsx)(j.Route,{path:"/album/:id",component:me}),Object(m.jsx)(j.Route,{path:"/playlist/:id",component:ve}),Object(m.jsx)(j.Route,{path:"/library",component:ge}),Object(m.jsx)(j.Route,{path:"/search",component:Ce}),Object(m.jsx)(j.Route,{exact:!0,path:"/",component:xe}),Object(m.jsx)(j.Route,{path:"*",component:Ne})]})}):Object(m.jsx)(h,{children:Object(m.jsxs)(j.Switch,{children:[Object(m.jsx)(j.Route,{path:"/login",children:Object(m.jsx)(X,{})}),Object(m.jsx)(j.Route,{path:"/signUp",children:Object(m.jsx)(H,{})}),Object(m.jsx)(j.Route,{path:"/",children:Object(m.jsx)(j.Redirect,{to:"/login"})})]})})})},Ae=[],Re=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Ae,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"SET_QUEUE":return t.queue;case"ADD_QUEUE":return[].concat(Object($.a)(e),[t.item]);default:return e}},Pe=function(){return localStorage.getItem("volume")},Fe=function(){return localStorage.getItem("loop")},Ue={playing:!1,loop:null!==Fe()&&Fe(),volume:null!==Pe()?Pe():.2,playingTrack:{_id:"",name:"",icon:"",album:{_id:"",name:"",icon:"",track:{_id:"",title:"",duration:NaN,url:""}}}},Se=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Ue,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"SET_PLAYING":return Object(n.a)(Object(n.a)({},e),{},{playing:t.playing});case"SET_LOOP":return localStorage.setItem("loop",t.loop),Object(n.a)(Object(n.a)({},e),{},{loop:t.loop});case"SET_PLAYING_SONG":return Object(n.a)(Object(n.a)({},e),{},{playingTrack:t.track});case"SET_VOLUME":return localStorage.setItem("volume",t.volume),Object(n.a)(Object(n.a)({},e),{},{volume:t.volume});default:return e}},Le=function(){var e=localStorage.getItem("t");return null!==e&&(N.a.defaults.headers.common.Authorization=e),e},Qe=Object(n.a)(Object(n.a)({},function(){var e=localStorage.getItem("u");return e?JSON.parse(e):{displayName:"",uid:""}}()),{},{token:null!==Le()?Le():null}),De=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Qe,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"SET_TOKEN":return localStorage.setItem("t",t.token),N.a.defaults.headers.common.Authorization=t.token,Object(n.a)(Object(n.a)({},e),{},{token:t.token});case"LOGOUT":return localStorage.removeItem("t"),localStorage.removeItem("u"),Object(n.a)(Object(n.a)({},e),{},{token:null,displayName:"",uid:""});case"SET_USER":var a={displayName:t.displayName,uid:t.uid};return localStorage.setItem("u",JSON.stringify(a)),Object(n.a)(Object(n.a)({},e),a);default:return e}},Ee=Object(o.c)({playerReducer:Se,queueReducer:Re,userReducer:De}),Ke=function(e){var t=e.message,a=e.options,n=e.close;return Object(m.jsxs)("div",{className:"flex items-center gap-1 bg-background dark:bg-backgroundDark border border-primary-300 dark:border-primaryDark-300 p-2 z-50 pointer-events-auto",children:["info"===a.type&&Object(m.jsx)(I.a,{path:G.h,className:"icon-medium text-primary-200 dark:text-primaryDark-200"}),"success"===a.type&&Object(m.jsx)(I.a,{path:G.b,className:"icon-medium text-primary-200 dark:text-primaryDark-200"}),"error"===a.type&&Object(m.jsx)(I.a,{path:G.f,className:"icon-medium text-primary-200 dark:text-primaryDark-200"}),Object(m.jsx)("span",{style:{flex:2},children:t}),Object(m.jsx)("div",{className:"hover:bg-primary-100 dark:hover:bg-primaryDark-100 rounded-full btn-icon m-1",title:"Dismiss",onClick:n,children:Object(m.jsx)(I.a,{path:G.e,className:"icon-small text-primary-300 dark:text-primaryDark-300"})})]})},qe=Object(o.e)(Ee);i.a.render(Object(m.jsx)(r.a.StrictMode,{children:Object(m.jsx)(l.a,{store:qe,children:Object(m.jsx)(d.a,Object(n.a)(Object(n.a)({template:Ke},{position:"top center",transition:"fade",timeout:2500}),{},{children:Object(m.jsx)(Te,{})}))})}),document.getElementById("root"))},69:function(e,t,a){},91:function(e,t){}},[[119,1,2]]]);
//# sourceMappingURL=main.8ee6a5e1.chunk.js.map